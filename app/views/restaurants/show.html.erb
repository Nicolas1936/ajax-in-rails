<%# 1 controller qui englobe tout %>
<%# targets: liste des items + la forme %>

<div class="container" data-controller="insert-in-list" data-insert-in-list-position-value="afterbegin">
  <%= render "reviews/form", restaurant: @restaurant, review: @review %>
  <h1><%= @restaurant.name %> <small><%= @restaurant.address %></small></h1>

  <h2><%= pluralize @restaurant.reviews.size, "review" %></h2>

  <div data-insert-in-list-target="items">
    <% if @restaurant.reviews.blank? %>
      Be the first to leave a review for <%= @restaurant.name %>
    <% else %>
      <% @restaurant.reviews.each do |review| %>
        <%= render "review", review: review %>
      <% end %>
    <% end %>
  </div>

  <%= link_to "Back to all restaurants", restaurants_path %>
</div>
